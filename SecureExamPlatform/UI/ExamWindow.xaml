<Window x:Class="SecureExamPlatform.UI.ExamWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Secure Exam Platform" 
        WindowStyle="None" 
        WindowState="Maximized"
        ResizeMode="NoResize"
        Topmost="True"
        Background="White">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="80"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3">
            <Grid Margin="20,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Exam Title and Student Info -->
                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <TextBlock Text="{Binding ExamTitle}" FontSize="16" FontWeight="SemiBold" 
                               Foreground="White"/>
                    <TextBlock Text="{Binding StudentId, StringFormat='Student: {0}'}" 
                               FontSize="12" Foreground="#BBDEFB"/>
                </StackPanel>

                <!-- Progress Info -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="{Binding QuestionProgress}" FontSize="14" 
                               Foreground="White" HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding RemainingTimeDisplay}" FontSize="12" 
                               Foreground="#FFEB3B" HorizontalAlignment="Center" FontWeight="SemiBold"/>
                </StackPanel>

                <!-- Security Status -->
                <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right">
                    <TextBlock Text="ðŸ”’ SECURE SESSION" FontSize="12" Foreground="#4CAF50" FontWeight="SemiBold"/>
                    <TextBlock Text="Monitoring Active" FontSize="10" Foreground="#BBDEFB"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="40,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Question Navigation Panel -->
            <Border Grid.Column="0" Background="#F8F9FA" BorderBrush="#E9ECEF" 
                    BorderThickness="1" CornerRadius="8" Margin="0,0,20,0">
                <StackPanel Margin="15">
                    <TextBlock Text="Questions" FontSize="14" FontWeight="SemiBold" 
                               Foreground="#495057" Margin="0,0,0,15"/>
                    
                    <ItemsControl Name="QuestionNavigationList" ItemsSource="{Binding Questions}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Content="{Binding Number}" 
                                        Width="30" Height="30" 
                                        Margin="2"
                                        Background="#E9ECEF" 
                                        BorderBrush="#CED4DA"
                                        BorderThickness="1"
                                        Click="QuestionNavButton_Click"
                                        Tag="{Binding Id}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>

                    <TextBlock Text="Legend:" FontSize="12" FontWeight="SemiBold" 
                               Margin="0,20,0,10" Foreground="#6C757D"/>
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,2">
                            <Rectangle Width="12" Height="12" Fill="#E9ECEF" Margin="0,0,8,0"/>
                            <TextBlock Text="Not answered" FontSize="10" Foreground="#6C757D"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,2">
                            <Rectangle Width="12" Height="12" Fill="#28A745" Margin="0,0,8,0"/>
                            <TextBlock Text="Answered" FontSize="10" Foreground="#6C757D"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,2">
                            <Rectangle Width="12" Height="12" Fill="#2196F3" Margin="0,0,8,0"/>
                            <TextBlock Text="Current" FontSize="10" Foreground="#6C757D"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Question Content -->
            <StackPanel Grid.Column="1">
                <!-- Question Text -->
                <TextBlock Name="QuestionNumberText" 
                           Text="{Binding CurrentQuestionNumber, StringFormat='Question {0}'}" 
                           FontSize="18" FontWeight="SemiBold" 
                           Foreground="#333" Margin="0,0,0,10"/>
                
                <Border Background="#F8F9FA" BorderBrush="#E9ECEF" BorderThickness="1" 
                        CornerRadius="8" Padding="20" Margin="0,0,0,20">
                    <TextBlock Name="QuestionText" 
                               Text="{Binding CurrentQuestionText}" 
                               FontSize="14" 
                               TextWrapping="Wrap" 
                               Foreground="#495057"
                               LineHeight="22"/>
                </Border>

                <!-- Answer Area -->
                <TextBlock Text="Your Answer:" FontSize="14" FontWeight="SemiBold" 
                           Foreground="#495057" Margin="0,0,0,10"/>
                
                <Border BorderBrush="#CED4DA" BorderThickness="2" CornerRadius="8">
                    <TextBox Name="AnswerTextBox" 
                             MinHeight="200" 
                             TextWrapping="Wrap" 
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             Padding="15"
                             FontSize="14"
                             BorderThickness="0"
                             Background="White"/>
                </Border>
            </StackPanel>
        </Grid>

        <!-- Footer with Navigation and Submit -->
        <Border Grid.Row="2" Background="#F8F9FA" BorderBrush="#E9ECEF" BorderThickness="0,1,0,0">
            <Grid Margin="40,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Previous Button -->
                <Button Grid.Column="0" Name="PreviousButton" 
                        Content="â† Previous" 
                        Background="#6C757D" 
                        Foreground="White"
                        BorderThickness="0"
                        Padding="20,10"
                        FontSize="14"
                        Click="PreviousButton_Click"/>

                <!-- Submit Button -->
                <Button Grid.Column="2" Name="SubmitButton" 
                        Content="Submit Exam" 
                        Background="#DC3545" 
                        Foreground="White"
                        BorderThickness="0"
                        Padding="20,10"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Click="SubmitButton_Click"
                        Margin="10,0,0,0"/>

                <!-- Next Button -->
                <Button Grid.Column="2" Name="NextButton" 
                        Content="Next â†’" 
                        Background="#28A745" 
                        Foreground="White"
                        BorderThickness="0"
                        Padding="20,10"
                        FontSize="14"
                        Click="NextButton_Click"
                        Margin="10,0,140,0"/>
            </Grid>
        </Border>
    </Grid>
</Window>
