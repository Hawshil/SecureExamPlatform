<Window x:Class="SecureExamPlatform.UI.FacultyDashboard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Faculty Dashboard - Secure Exam Platform"
        WindowState="Maximized"
        WindowStyle="None"
        Background="#f5f5f5">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top Bar with Exit Button -->
        <Border Grid.Row="0" Background="#2c2c2c" Padding="20,15">
            <Grid>
                <TextBlock Text="👨‍🏫 Faculty Dashboard" 
                           FontSize="24" 
                           FontWeight="Bold" 
                           Foreground="White"
                           VerticalAlignment="Center"/>

                <Button x:Name="ExitButton"
                        Content="✕ Exit"
                        HorizontalAlignment="Right"
                        Width="100"
                        Height="40"
                        Background="#f44336"
                        Foreground="White"
                        BorderThickness="0"
                        FontSize="14"
                        Click="ExitButton_Click"/>
            </Grid>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="40,20,40,40">

                <!-- Status Message -->
                <TextBlock x:Name="StatusText"
                           FontSize="13"
                           Margin="0,0,0,20"
                           TextWrapping="Wrap"/>

                <!-- Tab Control for different sections -->
                <TabControl Height="Auto" MinHeight="600">

                    <!-- Exam Management Tab -->
                    <TabItem Header="📋 Exam Management" FontSize="14">
                        <StackPanel Margin="20">

                            <!-- Upload Exam -->
                            <Border Background="White" 
                                    BorderBrush="#e0e0e0"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20"
                                    Margin="0,0,0,20">
                                <StackPanel>
                                    <TextBlock Text="📝 Upload Exam" 
                                               FontSize="18" 
                                               FontWeight="Bold"
                                               Margin="0,0,0,10"/>
                                    <TextBlock Text="Upload your exam JSON file" 
                                               FontSize="13"
                                               Foreground="#666"
                                               Margin="0,0,0,15"/>

                                    <Button Content="📁 Upload Exam JSON File"
                                            x:Name="UploadExamBtn"
                                            Click="UploadExam_Click"
                                            Height="45"
                                            FontSize="14"
                                            Background="#2196f3"
                                            Foreground="White"
                                            BorderThickness="0"/>
                                </StackPanel>
                            </Border>

                            <!-- Select Exam -->
                            <Border Background="White" 
                                    BorderBrush="#e0e0e0"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20">
                                <StackPanel>
                                    <TextBlock Text="📋 Available Exams" 
                                               FontSize="18" 
                                               FontWeight="Bold"
                                               Margin="0,0,0,10"/>
                                    <TextBlock Text="Select an exam for credential generation" 
                                               FontSize="13"
                                               Foreground="#666"
                                               Margin="0,0,0,15"/>

                                    <ComboBox x:Name="ExamSelector"
                                              Height="45"
                                              FontSize="14"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </TabItem>

                    <!-- Student Credentials Tab -->
                    <TabItem Header="🔑 Student Credentials" FontSize="14">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="20">

                                <!-- Single Student -->
                                <Border Background="White" 
                                        BorderBrush="#e0e0e0"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="20"
                                        Margin="0,0,0,20">
                                    <StackPanel>
                                        <TextBlock Text="🎓 Generate Code for Single Student" 
                                                   FontSize="18" 
                                                   FontWeight="Bold"
                                                   Margin="0,0,0,10"/>

                                        <TextBlock Text="Student ID:" 
                                                   FontSize="13"
                                                   Margin="0,15,0,5"/>
                                        <TextBox x:Name="SingleStudentIdBox"
                                                 Height="45"
                                                 FontSize="14"
                                                 Margin="0,0,0,15"
                                                 CharacterCasing="Upper"/>

                                        <Button Content="🔑 Generate Login Code"
                                                Click="GenerateSingleCode_Click"
                                                Height="45"
                                                FontSize="14"
                                                Background="#4caf50"
                                                Foreground="White"
                                                BorderThickness="0"/>
                                    </StackPanel>
                                </Border>

                                <!-- Batch Generation -->
                                <Border Background="White" 
                                        BorderBrush="#e0e0e0"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="20">
                                    <StackPanel>
                                        <TextBlock Text="👥 Batch Code Generation" 
                                                   FontSize="18" 
                                                   FontWeight="Bold"
                                                   Margin="0,0,0,10"/>

                                        <TextBlock Text="Student IDs (one per line):" 
                                                   FontSize="13"
                                                   Margin="0,15,0,5"/>
                                        <TextBox x:Name="BatchStudentIdsBox"
                                                 Height="150"
                                                 FontSize="14"
                                                 AcceptsReturn="True"
                                                 TextWrapping="Wrap"
                                                 VerticalScrollBarVisibility="Auto"
                                                 Margin="0,0,0,15"
                                                 CharacterCasing="Upper"/>

                                        <Button Content="🔑 Generate All Codes"
                                                Click="GenerateBatchCodes_Click"
                                                Height="45"
                                                FontSize="14"
                                                Background="#4caf50"
                                                Foreground="White"
                                                BorderThickness="0"
                                                Margin="0,0,0,15"/>

                                        <!-- Batch Output -->
                                        <Border x:Name="BatchCodesOutputBorder"
                                                Background="#f5f5f5"
                                                BorderBrush="#e0e0e0"
                                                BorderThickness="1"
                                                CornerRadius="5"
                                                Padding="15"
                                                Visibility="Collapsed">
                                            <StackPanel>
                                                <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
                                                    <TextBlock x:Name="BatchCodesOutput"
                                                             FontFamily="Consolas"
                                                             FontSize="12"
                                                             TextWrapping="Wrap"/>
                                                </ScrollViewer>

                                                <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                                    <Button Content="📋 Copy"
                                                            Click="CopyBatchCodes_Click"
                                                            Height="40"
                                                            Width="150"
                                                            FontSize="13"
                                                            Background="#2196f3"
                                                            Foreground="White"
                                                            BorderThickness="0"
                                                            Margin="0,0,10,0"/>

                                                    <Button Content="💾 Export"
                                                            Click="ExportBatchCodes_Click"
                                                            Height="40"
                                                            Width="150"
                                                            FontSize="13"
                                                            Background="#ff9800"
                                                            Foreground="White"
                                                            BorderThickness="0"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Grading Tab -->
                    <TabItem Header="📊 Grading" FontSize="14">
                        <StackPanel Margin="20">

                            <!-- Grading Controls -->
                            <Border Background="White" 
                                    BorderBrush="#e0e0e0"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20"
                                    Margin="0,0,0,20">
                                <StackPanel>
                                    <TextBlock Text="📊 Automatic Grading" 
                                               FontSize="18" 
                                               FontWeight="Bold"
                                               Margin="0,0,0,10"/>
                                    <TextBlock Text="Grade MCQ questions and analyze submissions" 
                                               FontSize="13"
                                               Foreground="#666"
                                               Margin="0,0,0,15"/>

                                    <TextBlock Text="Select Exam to Grade:" 
                                               FontSize="13"
                                               Margin="0,0,0,5"/>
                                    <ComboBox x:Name="GradingExamSelector"
                                              Height="45"
                                              FontSize="14"
                                              Margin="0,0,0,15"/>

                                    <Button Content="🎯 Grade Exam"
                                            Click="GradeExam_Click"
                                            Height="45"
                                            FontSize="14"
                                            Background="#9c27b0"
                                            Foreground="White"
                                            BorderThickness="0"/>

                                    <TextBlock x:Name="GradingStatusText"
                                               FontSize="12"
                                               Foreground="#666"
                                               Margin="0,10,0,0"
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>

                            <!-- Grading Results -->
                            <Border x:Name="GradingResultsPanel"
                                    Background="White" 
                                    BorderBrush="#e0e0e0"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="20"
                                    Visibility="Collapsed">
                                <StackPanel>
                                    <TextBlock Text="📈 Grading Results" 
                                               FontSize="18" 
                                               FontWeight="Bold"
                                               Margin="0,0,0,15"/>

                                    <ScrollViewer MaxHeight="400" VerticalScrollBarVisibility="Auto">
                                        <TextBlock x:Name="GradingResultsText"
                                                 FontFamily="Consolas"
                                                 FontSize="11"
                                                 TextWrapping="Wrap"
                                                 Background="#f5f5f5"
                                                 Padding="15"/>
                                    </ScrollViewer>

                                    <Button Content="💾 Export Detailed Report"
                                            Click="ExportGradingReport_Click"
                                            Height="45"
                                            FontSize="14"
                                            Background="#ff9800"
                                            Foreground="White"
                                            BorderThickness="0"
                                            Margin="0,15,0,0"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </TabItem>

                    <!-- Help Tab -->
                    <TabItem Header="ℹ️ Help" FontSize="14">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Border Background="#e3f2fd" 
                                    BorderBrush="#2196f3"
                                    BorderThickness="2"
                                    CornerRadius="8"
                                    Padding="30"
                                    Margin="20">
                                <StackPanel>
                                    <TextBlock Text="📚 Faculty Dashboard Guide" 
                                               FontSize="20" 
                                               FontWeight="Bold"
                                               Foreground="#1976d2"
                                               Margin="0,0,0,20"/>

                                    <TextBlock TextWrapping="Wrap" 
                                               FontSize="13"
                                               Foreground="#555"
                                               LineHeight="22">
                                        <Run Text="EXAM MANAGEMENT" FontWeight="Bold" FontSize="15"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="1. Upload Exam:" FontWeight="Bold"/>
                                        <LineBreak/>
                                        <Run Text="   • Prepare your exam in JSON format"/>
                                        <LineBreak/>
                                        <Run Text="   • Include question ID, text, type (MCQ/Essay), options, and correct answers"/>
                                        <LineBreak/>
                                        <Run Text="   • Set duration in minutes"/>
                                        <LineBreak/><LineBreak/>
                                        
                                        <Run Text="STUDENT CREDENTIALS" FontWeight="Bold" FontSize="15"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="2. Generate Login Codes:" FontWeight="Bold"/>
                                        <LineBreak/>
                                        <Run Text="   • Single: For individual students"/>
                                        <LineBreak/>
                                        <Run Text="   • Batch: For entire class (paste IDs, one per line)"/>
                                        <LineBreak/>
                                        <Run Text="   • Each code is single-use"/>
                                        <LineBreak/>
                                        <Run Text="   • Share Student ID + Login Code with students"/>
                                        <LineBreak/><LineBreak/>
                                        
                                        <Run Text="GRADING" FontWeight="Bold" FontSize="15"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="3. Automatic Grading:" FontWeight="Bold"/>
                                        <LineBreak/>
                                        <Run Text="   • Select exam from dropdown"/>
                                        <LineBreak/>
                                        <Run Text="   • Click 'Grade Exam' to process all submissions"/>
                                        <LineBreak/>
                                        <Run Text="   • MCQ questions are auto-graded"/>
                                        <LineBreak/>
                                        <Run Text="   • Essay questions require manual review"/>
                                        <LineBreak/>
                                        <Run Text="   • Export detailed reports to Desktop"/>
                                        <LineBreak/><LineBreak/>
                                        
                                        <Run Text="SECURITY FEATURES" FontWeight="Bold" FontSize="15"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="• Fullscreen kiosk mode during exam"/>
                                        <LineBreak/>
                                        <Run Text="• Process monitoring blocks unauthorized apps"/>
                                        <LineBreak/>
                                        <Run Text="• Screenshot prevention"/>
                                        <LineBreak/>
                                        <Run Text="• Auto-save every 30 seconds"/>
                                        <LineBreak/>
                                        <Run Text="• Emergency exit: Ctrl+Shift+Esc"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>